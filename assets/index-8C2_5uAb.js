(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();const Q=class Q{constructor(){this.elements=[]}addElement(e){this.elements.unshift(e)}evaluate(){for(const e of this.elements)e.evaluate([])}toString(){let e=`ComputationStack: {
`;for(const t of this.elements)e+=`  ${t.toString()}
`;return e+="}",e}};Q.instance=new Q;let x=Q;class h{constructor(){this.scopes=[]}setVariable(e,t){if(this.scopes.length===0){console.error("No scopes available to set a variable.");return}for(let r=this.scopes.length-1;r>=0;r--)if(e in this.scopes[r]){this.scopes[r][e]=t;return}this.scopes[this.scopes.length-1][e]=t}defineLocalVariable(e,t){if(this.scopes.length===0){console.error("No scopes available to set a variable.");return}this.scopes[this.scopes.length-1][e]=t}getVariable(e){for(let t=this.scopes.length-1;t>=0;t--)if(e in this.scopes[t])return this.scopes[t][e];console.error(`Variable "${e}" not found in any scope.`)}hasVariable(e){for(let t=this.scopes.length-1;t>=0;t--)if(e in this.scopes[t])return!0;return!1}push(){this.scopes.push({})}pop(){this.scopes.length>0?this.scopes.pop():console.error("No scopes to pop from the stack.")}toString(){return JSON.stringify(this.scopes,null,2)}}const p=class p{constructor(){this.reset()}reset(){h.instance=new h,h.instance.push(),x.instance.elements=[],p.output=""}interpret(){const e=x.instance,t=[];for(;e.elements.length>0;){const r=e.elements.pop(),s=[],a=r.constructor.numParameters;for(let l=0;l<a;l++)t.length>0?s.unshift(t.pop()):console.error("Not enough arguments for function:",r.constructor.name);const n=r.evaluate(s);t.push(n)}return p.output}static log(e){p.output+=e+`
`}};p.output="";let T=p;const v=class v{constructor(e){this.match=e}toString(){return`{${this.constructor.name}: ${this.match}}`}static findMatch(e){return this.matchExpression.exec(e)??null}};v.precedence=0,v.isExpandable=!1,v.numParameters=0;let o=v;class i{constructor(e){this.value=e,this.value=e}getValue(){return this.value}evaluate(){return this}}const w=class w extends o{constructor(e){super(e)}evaluate(e){for(const t of e)console.log(t.evaluate([]).getValue()),T.log(t.evaluate([]).getValue());return new i(-1)}};w.matchExpression=/P/g,w.precedence=1,w.numParameters=1;let I=w;const E=class E extends o{constructor(e){super(e)}evaluate(e){const t=e[0].evaluate([]).getValue(),r=e[1].evaluate([]).getValue();return new i(t+r)}};E.matchExpression=/A/g,E.precedence=1,E.numParameters=2;let b=E;const P=class P extends o{constructor(e){super(e)}evaluate(e){const t=e[0].evaluate([]).getValue(),r=e[1].evaluate([]).getValue();return new i(t/r)}};P.matchExpression=/D/g,P.precedence=1,P.numParameters=2;let j=P;const y=class y extends o{constructor(e){super(e)}evaluate(e){const t=e[0].evaluate([]).getValue(),r=e[1].evaluate([]).getValue();return new i(t*r)}};y.matchExpression=/X/g,y.precedence=1,y.numParameters=2;let k=y;const V=class V extends o{constructor(e){super(e)}evaluate(e){const t=e[0].evaluate([]).getValue(),r=e[1].evaluate([]).getValue();return new i(t-r)}};V.matchExpression=/S/g,V.precedence=1,V.numParameters=2;let q=V;const m=class m extends o{constructor(e){super(e);const t=e[0];let r=0;for(let s=0;s<t.length;s++){const a=t.charCodeAt(s)-97+1;r=r*26+a}this.value=new i(r)}evaluate(e){return this.value}};m.matchExpression=/N([a-z]*)/g,m.precedence=1,m.isExpandable=!0,m.numParameters=0;let H=m;const d=class d extends o{constructor(e){super(e)}evaluate(e){const t=e[0].evaluate([]).getValue();return h.instance.setVariable(this.match[0],t),new i(-1)}};d.matchExpression=/S([a-z]+)/g,d.precedence=1,d.isExpandable=!0,d.numParameters=1;let J=d;const g=class g extends o{constructor(e){super(e)}evaluate(e){const t=h.instance.getVariable(this.match[0]);return new i(t)}};g.matchExpression=/G([a-z]+)/g,g.precedence=1,g.isExpandable=!0,g.numParameters=0;let K=g;const O=class O extends o{constructor(e){super(e);const t=e[0];this.value=new i(t=="T"?1:0)}evaluate(e){return this.value}};O.matchExpression=/B(T|F)/g,O.precedence=2,O.numParameters=0;let U=O;const C=class C extends o{constructor(e){super(e),this.value=new i(e[0])}evaluate(e){return this.value}static findMatch(e){let t=0,r=-1;for(let s=0;s<e.length;s++)if(e.slice(s,s+3)==="STR")t===0&&(r=s),t++,s+=2;else if(e.slice(s,s+3)==="END"){if(t--,t===0&&r!==-1){const a=e.slice(r,s+3),n=e.slice(r+3,s);return Object.assign([a,n],{index:r,input:e})}s+=2}return null}};C.precedence=1e3,C.isExpandable=!0,C.numParameters=0;let X=C;const N=class N extends o{constructor(e){super(e)}evaluate(e){return S(e[0].evaluate([]).getValue()),new i(-1)}};N.matchExpression=/EVAL/g,N.precedence=4,N.numParameters=1;let B=N;const $=class $ extends o{constructor(e){super(e)}evaluate(e){return h.instance.pop(),new i(-1)}};$.matchExpression=/POP/g,$.precedence=3,$.numParameters=0;let M=$;const z=class z extends o{constructor(e){super(e)}evaluate(e){return h.instance.push(),new i(-1)}};z.matchExpression=/PUSH/g,z.precedence=4,z.numParameters=0;let W=z;const f=class f extends o{constructor(e){super(e)}evaluate(e){const t=e[0].evaluate([]).getValue();return h.instance.defineLocalVariable(this.match[0],t),new i(-1)}};f.matchExpression=/D([a-z]+)/g,f.precedence=1,f.isExpandable=!0,f.numParameters=1;let Y=f;const A=class A extends o{constructor(e){super(e)}evaluate(e){return e[0].evaluate([]).getValue()>0&&S(e[1].evaluate([]).getValue()),new i(-1)}};A.matchExpression=/EVALIF/g,A.precedence=6,A.numParameters=2;let Z=A;const G=[X,H,U,B,Z,W,M,J,Y,K,I,b,q,k,j];function S(c){const e=new x;c=ee(c);const t=[];G.sort((a,n)=>a.isExpandable!==n.isExpandable?a.isExpandable?-1:1:n.precedence-a.precedence);for(const a of G){const n=Array();let l;for(;(l=a.findMatch(c))!==null;){const u=l[0].length;c=c.slice(0,l.index)+" ".repeat(u)+c.slice(l.index+u),n.push(l)}for(const u of n){const R={instance:new a(u.slice(1)),index:u.index};let L=t.findIndex(_=>_.index>R.index);L===-1?t.push(R):t.splice(L,0,R)}}const r=[],s=[];for(const a of t){const n=a.instance,l=n.constructor.numParameters;if(l<=0){e.addElement(n);const u=()=>{s[s.length-1]<=1?(s.pop(),e.addElement(r.pop()),u()):s[s.length-1]-=1};u()}else r.push(n),s.push(l)}x.instance.elements.push(...e.elements)}function ee(c){return c=c.replace(/\/\/.*$/gm,""),c=c.replace(/\s+/g," ").trim(),c}const D=new T;function te(c){return D.reset(),S(c),D.interpret()}window.runCode=()=>{const c=document.getElementById("codeInput").value,e=te(c);document.getElementById("output").textContent=e};
